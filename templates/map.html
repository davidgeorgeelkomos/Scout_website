{% extends "layout.html" %}
{% block title %} - Users Map{% endblock %}

{% block main %}

<!-- Leaflet -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<h2 class="text-center mb-3">All Scouts Locations</h2>

<div id="map" style="height: 80vh; border-radius: 12px;"></div>

<script>
  const map = L.map('map').setView([30.9105556, 30.17638888888889], 14);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  const locations = {{ locations | tojson }};

  if (locations.length === 0) {
    alert("No locations available yet.");
  }

  locations.forEach(loc => {
    L.marker([loc.latitude, loc.longitude])
      .addTo(map)
      .bindPopup(`
        <strong>${loc.name}</strong><br>
        Sector: ${loc.sector}
      `);
  });
</script>


{% endblock %}
